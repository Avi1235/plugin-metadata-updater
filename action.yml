name: 'Spinnaker Plugin Metadata Updater'
description: 'Creates a PR against a Spinnaker plugin metadata repository with a new plugin release'
inputs:
  metadata:
    description: 'Path to the metadata file generated by `gradle releaseBundle`'
    required: true
  binary_url:
    description: 'URL where the plugin zip was uploaded.'
    required: true
  metadata_repo_url:
    description: 'The plugin metadata repository URL'
    required: true
runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
  - '--metadata'
  - ${{ inputs.metadata }}
  - '--binary-url'
  - ${{ inputs.binary_url }}
  - '--metadata-repo-url'
  - ${{ inputs.metadata_repo_url }}
